-- Add indexes to frequently used columns
CREATE INDEX idx_student_Stu_ID ON student (Stu_ID);
CREATE INDEX idx_ad_Stu_ID ON application_details (Stu_ID);
CREATE INDEX idx_ad_App_ID ON application_details (App_ID);
CREATE INDEX idx_ca_App_ID ON Course_Application (App_ID);
CREATE INDEX idx_cd_Course_ID ON Course_Details (Course_ID);
CREATE INDEX idx_sd_Stu_ID ON schol_Application (Stu_ID);
CREATE INDEX idx_sd_App_ID ON schol_Application (App_ID);
CREATE INDEX idx_sd_requestedAmount ON schol_Application (requestedAmount);
CREATE INDEX idx_ppd_Stu_ID ON Paid_Payment_Details (Stu_ID);
CREATE INDEX idx_sds_Stu_ID ON submited_Doc_status (Stu_ID);
CREATE INDEX idx_adt_App_ID ON Adminstaive_Details (App_ID);

-- Query 1
SELECT Stu_ID FROM student
UNION
SELECT Stu_ID FROM submited_Doc_status;

-- Query 2
SELECT Stu_ID FROM student
EXCEPT
SELECT Stu_ID FROM submited_Doc_status;

-- Query 3
SELECT Stu_ID FROM student
INTERSECT
SELECT Stu_ID FROM submited_Doc_status;

-- Query 4
SELECT Stu_ID FROM student
WHERE Stu_ID NOT IN (
    SELECT Stu_ID FROM submited_Doc_status
);

-- Query 5
SELECT * FROM student
INNER JOIN submited_Doc_status ON student.Stu_ID = submited_Doc_status.Stu_ID;

-- Query 6
SELECT * FROM student;

-- Query 7
SELECT * FROM student
LEFT JOIN submited_Doc_status ON student.Stu_ID = submited_Doc_status.Stu_ID;

-- Query 8
SELECT * FROM student_details
RIGHT JOIN submited_Doc_status ON student_details.Stu_ID = submited_Doc_status.Stu_ID;

-- Query 9
SELECT * 
FROM student_details
LEFT OUTER JOIN submited_Doc_status ON student_details.Stu_ID = submited_Doc_status.Stu_ID
UNION
SELECT * 
FROM student_details
RIGHT OUTER JOIN submited_Doc_status ON student_details.Stu_ID = submited_Doc_status.Stu_ID
WHERE student_details.Stu_ID IS NULL;

-- Query 10
SELECT Stu_ID, First_Name, Last_Name, Street, City, District, NULL AS Doc_ID, NULL AS Verified_Status
FROM student_details
UNION
SELECT NULL AS Stu_ID, NULL AS First_Name, NULL AS Last_Name, NULL AS Street, NULL AS City, NULL AS District, Doc_ID, Verified_Status
FROM submited_Doc_status;

-- Query 11
SELECT student.Stu_ID AS student_Stu_ID, 
       student.First_Name, 
       student.Last_Name, 
       student.Street, 
       student.City, 
       student.District,
       submited_Doc_status.Stu_ID AS doc_Stu_ID,
       submited_Doc_status.Doc_ID,
       submited_Doc_status.Verified_Status
FROM student
LEFT JOIN submited_Doc_status ON student.Stu_ID = submited_Doc_status.Stu_ID;

-- Query 12
SELECT Stu_ID
FROM (
    SELECT Stu_ID FROM student_details
    UNION
    SELECT Stu_ID FROM submited_Doc_status
) AS Unioned_Students;

-- Query 13
SELECT Stu_ID, First_Name, Last_Name FROM student
INTERSECT
SELECT Stu_ID, First_Name, Last_Name FROM student WHERE District = 'Nuweraeliya';

-- Query 14
SELECT s.First_Name, s.Last_Name
FROM student s
JOIN submited_Doc_status sd ON s.Stu_ID = sd.Stu_ID
GROUP BY s.Stu_ID
HAVING COUNT(sd.Doc_ID) >= 2;

-- Query 15
SELECT s.First_Name, s.Last_Name, SUM(pd.Amount) AS Total_Paid
FROM student s
LEFT JOIN Paid_Payment_Details ppd ON s.Stu_ID = ppd.Stu_ID
LEFT JOIN Payment_Details pd ON ppd.Pay_ID = pd.Pay_ID
GROUP BY s.Stu_ID;

-- Query 16
SELECT s.First_Name, s.Last_Name
FROM Student s
JOIN Application_Details ad ON s.Stu_ID = ad.Stu_ID
JOIN Adminstaive_Details adt ON ad.App_ID = adt.App_ID
WHERE adt.Schol_status = 1;

-- Query 17
SELECT first_name , last_name FROM student s 
INNER JOIN application_details ap 
ON ap.Stu_ID = s.Stu_ID 
INNER JOIN adminstaive_details ad
ON ad.App_ID = ap.App_ID
WHERE ad.Program_status = FALSE ;

-- Query 18
SELECT DISTINCT s.First_Name, s.Last_Name , ad.app_ID
FROM student s 
INNER JOIN application_details ad ON ad.Stu_ID = s.Stu_ID
INNER JOIN schol_application sa ON sa.App_ID = ad.App_ID
WHERE sa.requestedAmount > 3000 ;
